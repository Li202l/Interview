# 1.goLang垃圾回收机制

垃圾回收就是对程序中不再使用的内存资源进行自动回收操作

常见的垃圾回收算法

1.引用计数

每个对象维护一个引用计数，当被引用对象被创建或被赋值给其他对象时引用计数自动加 +1；如果这个对象被销毁，则计数 -1 ，当计数为 0 时，回收该对象。

优点：对象可以很快被回收，不会出现内存耗尽或到达阀值才回收。

缺点：不能很好的处理循环引用

2.标记-清除:

从根变量开始遍历所有引用的对象，引用的对象标记被引用，没有被标记的则进行回收

v1.3之前的标记-清除:

1.暂停业务逻辑，找到不可达对象和可达对象

2.标记出所有被可达对象

3.标记完了以后，清除所有没有被标记的对象

4.停止暂停，继续运行程序，重复这个过程

v1.5三个标记法:



优点：解决了引用计数的缺点

缺点：需要STW stop the world 暂时停止程序运行